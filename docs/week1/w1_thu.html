<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jelmer Poelstra">
<meta name="dcterms.date" content="2024-02-29">

<title>pracs-sp24 - Week 1 - Lecture 2: Unix Shell Basics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">pracs-sp24</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text"><i class="fa-solid fa-home" aria-label="home"></i></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-week-overviews" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Week overviews</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-week-overviews">    
        <li>
    <a class="dropdown-item" href="../week0/overview.html">
 <span class="dropdown-text">Pre-course</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../week1/w1_overview.html">
 <span class="dropdown-text">Week 1</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-final-project" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Final project</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-final-project">    
        <li class="dropdown-header">General info (TBA)</li>
        <li class="dropdown-header">Checkpoint I: Proposal (TBA)</li>
        <li class="dropdown-header">Checkpoint II: Progress report (TBA)</li>
        <li class="dropdown-header">Checkpoint III: Presentation (TBA)</li>
        <li class="dropdown-header">Checkpoint IV: Submission (TBA)</li>
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference-pages" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reference Pages</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-reference-pages">    
        <li>
    <a class="dropdown-item" href="../ref/glossary.html">
 <span class="dropdown-text">Glossary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ref/shell.html">
 <span class="dropdown-text">Unix shell</span></a>
  </li>  
        <li class="dropdown-header">Markdown (TBA)</li>
        <li class="dropdown-header">Shell scripting (TBA)</li>
        <li class="dropdown-header">OSC, Slurm, and Conda (TBA)</li>
        <li class="dropdown-header">Git (TBA)</li>
        <li class="dropdown-header">Nextflow (TBA)</li>
        <li class="dropdown-header">List of Further Resources (TBA)</li>
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://osu.instructure.com/courses/163340"> 
<span class="menu-text"><i class="fa-solid fa-graduation-cap" aria-label="graduation-cap"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://ondemand.osc.edu"> 
<span class="menu-text"><i class="fa-solid fa-desktop" aria-label="desktop"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://library.ohio-state.edu/record=b8624007~S7"> 
<span class="menu-text"><i class="fa-solid fa-book" aria-label="book"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://library.ohio-state.edu/record=b9490023~S7"> 
<span class="menu-text"><i class="fa-solid fa-book-open" aria-label="book-open"></i></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/jelmerp/pracs-sp24">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/jelmerp/pracs-sp24/issues/new">
            Report an Issue
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#goals-for-this-session" id="toc-goals-for-this-session" class="nav-link active" data-scroll-target="#goals-for-this-session"><span class="header-section-number">1</span> Goals for this session</a></li>
  <li><a href="#introduction-ch.-1.1-1.2" id="toc-introduction-ch.-1.1-1.2" class="nav-link" data-scroll-target="#introduction-ch.-1.1-1.2"><span class="header-section-number">2</span> Introduction (Ch. 1.1-1.2)</a></li>
  <li><a href="#accessing-a-shell-at-osc" id="toc-accessing-a-shell-at-osc" class="nav-link" data-scroll-target="#accessing-a-shell-at-osc"><span class="header-section-number">3</span> Accessing a shell at OSC</a></li>
  <li><a href="#getting-started-with-unix-ch.-1.3" id="toc-getting-started-with-unix-ch.-1.3" class="nav-link" data-scroll-target="#getting-started-with-unix-ch.-1.3"><span class="header-section-number">4</span> Getting started with Unix (Ch. 1.3)</a></li>
  <li><a href="#getting-started-with-the-shell-ch.-1.4" id="toc-getting-started-with-the-shell-ch.-1.4" class="nav-link" data-scroll-target="#getting-started-with-the-shell-ch.-1.4"><span class="header-section-number">5</span> Getting started with the shell (Ch. 1.4)</a>
  <ul class="collapse">
  <li><a href="#the-prompt" id="toc-the-prompt" class="nav-link" data-scroll-target="#the-prompt"><span class="header-section-number">5.1</span> The prompt</a></li>
  <li><a href="#a-few-simple-commands-date-whoami-pwd" id="toc-a-few-simple-commands-date-whoami-pwd" class="nav-link" data-scroll-target="#a-few-simple-commands-date-whoami-pwd"><span class="header-section-number">5.2</span> A few simple commands: <code>date</code>, <code>whoami</code>, <code>pwd</code></a></li>
  <li><a href="#the-cal-command-and-options-arguments" id="toc-the-cal-command-and-options-arguments" class="nav-link" data-scroll-target="#the-cal-command-and-options-arguments"><span class="header-section-number">5.3</span> The <code>cal</code> command — and options &amp; arguments</a></li>
  <li><a href="#getting-help" id="toc-getting-help" class="nav-link" data-scroll-target="#getting-help"><span class="header-section-number">5.4</span> Getting help</a></li>
  <li><a href="#cd-and-command-actions" id="toc-cd-and-command-actions" class="nav-link" data-scroll-target="#cd-and-command-actions"><span class="header-section-number">5.5</span> <code>cd</code> and command “actions”</a></li>
  <li><a href="#keyboard-shortcuts" id="toc-keyboard-shortcuts" class="nav-link" data-scroll-target="#keyboard-shortcuts"><span class="header-section-number">5.6</span> Keyboard shortcuts</a></li>
  <li><a href="#environment-variables" id="toc-environment-variables" class="nav-link" data-scroll-target="#environment-variables"><span class="header-section-number">5.7</span> Environment variables</a></li>
  <li><a href="#create-your-own-dir-get-the-csb-data" id="toc-create-your-own-dir-get-the-csb-data" class="nav-link" data-scroll-target="#create-your-own-dir-get-the-csb-data"><span class="header-section-number">5.8</span> Create your own dir &amp; get the CSB data</a></li>
  <li><a href="#paths-navigation-shortcuts" id="toc-paths-navigation-shortcuts" class="nav-link" data-scroll-target="#paths-navigation-shortcuts"><span class="header-section-number">5.9</span> Paths &amp; navigation shortcuts</a></li>
  </ul></li>
  <li><a href="#basic-unix-commands-ch.-1.5" id="toc-basic-unix-commands-ch.-1.5" class="nav-link" data-scroll-target="#basic-unix-commands-ch.-1.5"><span class="header-section-number">6</span> Basic Unix commands (Ch. 1.5)</a>
  <ul class="collapse">
  <li><a href="#ls-to-list-files" id="toc-ls-to-list-files" class="nav-link" data-scroll-target="#ls-to-list-files"><span class="header-section-number">6.1</span> <code>ls</code> to list files</a></li>
  <li><a href="#cp-to-copy-files" id="toc-cp-to-copy-files" class="nav-link" data-scroll-target="#cp-to-copy-files"><span class="header-section-number">6.2</span> <code>cp</code> to copy files</a></li>
  <li><a href="#mv-to-move-and-rename-files" id="toc-mv-to-move-and-rename-files" class="nav-link" data-scroll-target="#mv-to-move-and-rename-files"><span class="header-section-number">6.3</span> <code>mv</code> to move and rename files</a></li>
  <li><a href="#viewing-and-processing-text-files" id="toc-viewing-and-processing-text-files" class="nav-link" data-scroll-target="#viewing-and-processing-text-files"><span class="header-section-number">6.4</span> Viewing and processing text files</a></li>
  </ul></li>
  <li><a href="#advanced-unix-commands-ch.-1.6" id="toc-advanced-unix-commands-ch.-1.6" class="nav-link" data-scroll-target="#advanced-unix-commands-ch.-1.6"><span class="header-section-number">7</span> Advanced Unix commands (Ch. 1.6)</a>
  <ul class="collapse">
  <li><a href="#standard-output-and-redirection" id="toc-standard-output-and-redirection" class="nav-link" data-scroll-target="#standard-output-and-redirection"><span class="header-section-number">7.1</span> Standard output and redirection</a></li>
  <li><a href="#standard-input-and-pipes" id="toc-standard-input-and-pipes" class="nav-link" data-scroll-target="#standard-input-and-pipes"><span class="header-section-number">7.2</span> Standard input and pipes</a></li>
  <li><a href="#selecting-columns-using-cut" id="toc-selecting-columns-using-cut" class="nav-link" data-scroll-target="#selecting-columns-using-cut"><span class="header-section-number">7.3</span> Selecting columns using <code>cut</code></a></li>
  <li><a href="#combining-cut-sort-and-uniq-to-create-a-list" id="toc-combining-cut-sort-and-uniq-to-create-a-list" class="nav-link" data-scroll-target="#combining-cut-sort-and-uniq-to-create-a-list"><span class="header-section-number">7.4</span> Combining <code>cut</code>, <code>sort</code>, and <code>uniq</code> to create a list</a></li>
  <li><a href="#substituting-characters-using-tr" id="toc-substituting-characters-using-tr" class="nav-link" data-scroll-target="#substituting-characters-using-tr"><span class="header-section-number">7.5</span> Substituting characters using <code>tr</code></a></li>
  <li><a href="#grep-to-print-lines-matching-a-pattern" id="toc-grep-to-print-lines-matching-a-pattern" class="nav-link" data-scroll-target="#grep-to-print-lines-matching-a-pattern"><span class="header-section-number">7.6</span> <code>grep</code> to print lines matching a pattern</a></li>
  </ul></li>
  <li><a href="#wrap-up-the-unix-philosophy" id="toc-wrap-up-the-unix-philosophy" class="nav-link" data-scroll-target="#wrap-up-the-unix-philosophy"><span class="header-section-number">8</span> Wrap-up &amp; the Unix philosophy</a>
  <ul class="collapse">
  <li><a href="#covered-in-the-chapter-but-not-in-todays-lecture" id="toc-covered-in-the-chapter-but-not-in-todays-lecture" class="nav-link" data-scroll-target="#covered-in-the-chapter-but-not-in-todays-lecture"><span class="header-section-number">8.1</span> Covered in the chapter but not in today’s lecture</a></li>
  <li><a href="#the-unix-philosophy" id="toc-the-unix-philosophy" class="nav-link" data-scroll-target="#the-unix-philosophy"><span class="header-section-number">8.2</span> The Unix philosophy</a></li>
  <li><a href="#unix-shell-in-the-weeks-ahead" id="toc-unix-shell-in-the-weeks-ahead" class="nav-link" data-scroll-target="#unix-shell-in-the-weeks-ahead"><span class="header-section-number">8.3</span> Unix shell in the weeks ahead</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 1 - Lecture 2: Unix Shell Basics</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jelmer Poelstra </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 29, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<hr>
<p><br></p>
<section id="goals-for-this-session" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="goals-for-this-session"><span class="header-section-number">1</span> Goals for this session</h2>
<p>In this session, we’ll cover much of the material from CSB Chapter 1, to learn:</p>
<ul>
<li>Why using a command-line interface can be beneficial.</li>
<li>What the Unix shell is and what you can do with it.</li>
<li>Using the shell, learn how to:
<ul>
<li>Navigate around your computer.</li>
<li>Create and manage directories and files.</li>
<li>Find and view text files.</li>
<li>Search within, manipulate, and extract information from text files.</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>See the <a href="../ref/shell.html">“Topic Overview” page on the Unix shell</a> for an overview of Unix shell commands we’ll cover during this course.</p>
</div>
</div>
<p><br></p>
</section>
<section id="introduction-ch.-1.1-1.2" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introduction-ch.-1.1-1.2"><span class="header-section-number">2</span> Introduction (Ch. 1.1-1.2)</h2>
<section id="linux-vs-unix" class="level4">
<h4 class="anchored" data-anchor-id="linux-vs-unix">Linux vs Unix</h4>
<p>TODO</p>
</section>
<section id="unix-unix-shell-terminology" class="level4">
<h4 class="anchored" data-anchor-id="unix-unix-shell-terminology">Unix &amp; Unix shell terminology</h4>
<ul>
<li><strong>Command Line</strong> — the most general term, an interface<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> where you type commands</li>
<li><strong>Terminal</strong> — the program/app/window that can run a Unix shell</li>
<li><strong>Shell</strong> — a command line interface to your computer</li>
<li><strong>Unix Shell</strong> — the types of shells on Unix family (Linux + Mac) computers</li>
<li><strong>Bash</strong> — the specific Unix shell language that is most common on Unix computers</li>
</ul>
<p>Even though these are not exactly synonyms, for day-to-day computing/bioinformatics, they are commonly used somewhat interchangeably.</p>
</section>
<section id="why-use-the-unix-shell" class="level4">
<h4 class="anchored" data-anchor-id="why-use-the-unix-shell">Why use the Unix shell?</h4>
<ul>
<li><p>Versus programs with graphical user interfaces:</p>
<ul>
<li><strong>Using software</strong><br>
Best or only option to use many programs, especially in bioinformatics.</li>
<li><strong>Automation and fewer errors</strong><br>
The shell allows you to repeat and automate tasks easily and without introducing errors.</li>
<li><strong>Reproducibility</strong><br>
The shell keeps a record of what you have done.</li>
<li><strong>Working with large files</strong><br>
Shell commands are good at processing large files, which are common when working with omics data</li>
<li><strong>Remote computing – especially HPCs</strong><br>
Often not possible to do <em>anything</em> outside of the terminal.</li>
</ul></li>
<li><p>Versus scripting languages like Python or R:</p>
<ul>
<li>For many simpler tasks, built-in shell tools are faster — in terms of coding time, processing time, and the ease of processing very large files.</li>
<li>The Unix shell has a <em>direct</em> interface to other programs.</li>
</ul></li>
</ul>
<p><br></p>
</section>
</section>
<section id="accessing-a-shell-at-osc" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="accessing-a-shell-at-osc"><span class="header-section-number">3</span> Accessing a shell at OSC</h2>
<ol type="1">
<li>Go to <a href="https://ondemand.osc.edu" class="uri">https://ondemand.osc.edu</a> in your browser, and log in.</li>
<li>Click on <code>Clusters</code> and then <code>Pitzer Shell Access</code>.</li>
</ol>
<hr style="height:1pt; visibility:hidden;">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Copying and pasting in this shell
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can’t right-click in this shell, so to copy-and-paste:</p>
<ul>
<li>To <strong>paste</strong>, use <kbd>Ctrl</kbd>+<kbd>V</kbd>.</li>
<li>To <strong>copy</strong>, simply select text and you should see a <i class="fa fa-cut"></i> icon.</li>
</ul>
<p><i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Try pasting a random word that you copy from this page into your shell. You may get a permission pop-up, but sometimes it silently refuses — if nothing appears, click on the clipboard icon in your browser’s address bar (see far left side of the screenshot below):</p>
<p><img src="img/pasting.png" class="img-fluid"></p>
</div>
</div>
<p><br></p>
</section>
<section id="getting-started-with-unix-ch.-1.3" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="getting-started-with-unix-ch.-1.3"><span class="header-section-number">4</span> Getting started with Unix (Ch. 1.3)</h2>
<section id="unix-directory-structure" class="level4">
<h4 class="anchored" data-anchor-id="unix-directory-structure">Unix directory structure</h4>
<p>TODO: ADD DIR STRUCTURE FIGURE</p>
<ul>
<li><p>“Directory” (or “<strong>dir</strong>” for short) is the term for <em>folder</em> that is commonly used in Unix contexts.</p></li>
<li><p>The Unix directory structure is hierarchical, with a single starting point: the <strong>root</strong>, depicted as <strong><code>/</code></strong>.</p></li>
<li><p>A “<strong>path</strong>” gives the location of a file or directory, in which directories are separated by forward slashes <code>/</code>.</p></li>
<li><p>For example, the path to our OSC project’s main/project dir is <code>/fs/ess/PAS2700</code>. This means: the dir <code>PAS2700</code> is located inside the dir <code>ess</code>, which in turn is located inside the dir <code>fs</code>, which in turn is located in the computer’s root directory.</p></li>
<li><p>The OSC dir structure is somewhat different from that of a personal computer. For example, our Home dir is not <code>/home/&lt;username&gt;</code> like in the book, but <code>/users/&lt;some-project&gt;/&lt;username&gt;</code>, as we’ll see below.</p></li>
</ul>
<p><br></p>
</section>
</section>
<section id="getting-started-with-the-shell-ch.-1.4" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="getting-started-with-the-shell-ch.-1.4"><span class="header-section-number">5</span> Getting started with the shell (Ch. 1.4)</h2>
<section id="the-prompt" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="the-prompt"><span class="header-section-number">5.1</span> The prompt</h3>
<p>Inside your terminal, the “prompt” indicates that the shell is ready for a command. What is shown exactly varies across shells and can also be customized, but our prompts at OSC should show the following information:</p>
<p><code>&lt;username&gt;@&lt;node-name&gt; &lt;working-dir&gt;]$</code></p>
<p>For example (and <em>note that <strong><code>~</code></strong> means your Home dir</em>):</p>
<pre class="bash-in-nocolor"><code>[jelmer@pitzer-login02 ~]$ </code></pre>
<p>We type our commands after the dollar sign, and then press <kbd>Enter</kbd> to execute the command. When the command has finished executing, we’ll get our prompt back and can type a new command.</p>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="a-few-simple-commands-date-whoami-pwd" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="a-few-simple-commands-date-whoami-pwd"><span class="header-section-number">5.2</span> A few simple commands: <code>date</code>, <code>whoami</code>, <code>pwd</code></h3>
<p>The Unix shell comes with hundreds of “commands”: small programs that perform specific actions. If you’re familiar with R or Python, a Unix <em>command</em> is like an R/Python <em>function</em>.</p>
<p>Let’s start with a few simple commands:</p>
<ul>
<li><p>The <code>date</code> command prints the current date and time:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>Wed Feb 7 09:11:51 EST 2024</code></pre></li>
<li><p>The <code>whoami</code> (who-am-i) command prints your username:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">whoami</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>jelmer</code></pre></li>
<li><p>The <code>pwd</code> (Print Working Directory) command prints the path to the directory you are currently located in:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/users/PAS0471/jelmer</code></pre></li>
</ul>
<p>All 3 of those commands provided us with some output. That output was <strong>printed to screen</strong>, which is the default behavior for nearly every Unix command.</p>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="the-cal-command-and-options-arguments" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="the-cal-command-and-options-arguments"><span class="header-section-number">5.3</span> The <code>cal</code> command — and options &amp; arguments</h3>
<p>The <code>cal</code> command is another example of a command that simply prints some information to the screen, in this case a calendar. We’ll use it to learn about command <em>options</em> and <em>arguments</em>.</p>
<p>Invoking <code>cal</code> without options or arguments will show the current month:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>    February 2024   
Su Mo Tu We Th Fr Sa
             1  2  3
 4  5  6  7  8  9 10
11 12 13 14 15 16 17
18 19 20 21 22 23 24
25 26 27 28 29</code></pre>
<section id="option-examples" class="level4">
<h4 class="anchored" data-anchor-id="option-examples">Option examples</h4>
<p>Use the <em>option</em> <code>-j</code> (dash and then j) for a Julian calendar:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure to leave a space between `cal` and `-j`!</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span> <span class="at">-j</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>       February 2024       
Sun Mon Tue Wed Thu Fri Sat
                 32  33  34
 35  36  37  38  39  40  41
 42  43  44  45  46  47  48
 49  50  51  52  53  54  55
 56  57  58  59  60</code></pre>
<p>Use the <code>-3</code> option to show 3 months (adding the previous and next month):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span> <span class="at">-3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>    January 2024          February 2024          March 2024     
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa
    1  2  3  4  5  6               1  2  3                  1  2
 7  8  9 10 11 12 13   4  5  6  7  8  9 10   3  4  5  6  7  8  9
14 15 16 17 18 19 20  11 12 13 14 15 16 17  10 11 12 13 14 15 16
21 22 23 24 25 26 27  18 19 20 21 22 23 24  17 18 19 20 21 22 23
28 29 30 31           25 26 27 28 29        24 25 26 27 28 29 30
                                            31   </code></pre>
<p>We can always combine multiple options, for example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span> <span class="at">-j</span> <span class="at">-3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>        January 2024                February 2024                  March 2024        
Sun Mon Tue Wed Thu Fri Sat  Sun Mon Tue Wed Thu Fri Sat  Sun Mon Tue Wed Thu Fri Sat
      1   2   3   4   5   6                   32  33  34                       61  62
  7   8   9  10  11  12  13   35  36  37  38  39  40  41   63  64  65  66  67  68  69
 14  15  16  17  18  19  20   42  43  44  45  46  47  48   70  71  72  73  74  75  76
 21  22  23  24  25  26  27   49  50  51  52  53  54  55   77  78  79  80  81  82  83
 28  29  30  31               56  57  58  59  60           84  85  86  87  88  89  90
                                                           91 </code></pre>
<p>Handily, options can be “pasted together” like so (output not shown - same as above):</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span> <span class="at">-j3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="options-summary" class="level4">
<h4 class="anchored" data-anchor-id="options-summary">Options summary</h4>
<p>As we’ve seen, options are specified with a <code>-</code> (or <code>--</code>, as you’ll see below). So far, we’ve only seen the type of options that are also called “<strong>flags</strong>”: <em>we changed some functionality in an ON/OFF type way</em>:</p>
<ul>
<li>Turning a Julian calender display ON with <code>-j</code></li>
<li>Turning a 3-month display ON with <code>-3</code>.</li>
</ul>
<p>In general terms, options <strong>change the behavior</strong> of a command.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A more complex type of option
</div>
</div>
<div class="callout-body-container callout-body">
<p>When we get to commands like <code>cut</code> later in this session, we’ll also see options that take an argument: e.g., the <code>-f</code> option allows you to select a column, where <code>-f 3</code> will select the 3rd column.</p>
</div>
</div>
</section>
<section id="arguments" class="level4">
<h4 class="anchored" data-anchor-id="arguments">Arguments</h4>
<p>Whereas options change the behavior of a command, arguments typically tell the command <strong>what to operate on</strong>. Most commonly, these are file or directory paths.</p>
<p>Admittedly, the <code>cal</code> command is not the best illustration of this general pattern — when you give it one argument, this is supposed to be the year it should show a calendar for:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span> 2020</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>                              2020                               

       January               February                 March       
Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa
          1  2  3  4                      1    1  2  3  4  5  6  7
 5  6  7  8  9 10 11    2  3  4  5  6  7  8    8  9 10 11 12 13 14
12 13 14 15 16 17 18    9 10 11 12 13 14 15   15 16 17 18 19 20 21
19 20 21 22 23 24 25   16 17 18 19 20 21 22   22 23 24 25 26 27 28
26 27 28 29 30 31      23 24 25 26 27 28 29   29 30 31

# [...output truncated, entire year is shown...]</code></pre>
<p>Syntax-wise, arguments:</p>
<ul>
<li><p>Are not preceded by a <code>-</code> (or <code>--</code>)</p></li>
<li><p>If options and arguments are combined, arguments <strong>come after</strong> options:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span> <span class="at">-j</span> 2022</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>                            2020                          

          January                       February         
Sun Mon Tue Wed Thu Fri Sat   Sun Mon Tue Wed Thu Fri Sat
              1   2   3   4                            32
  5   6   7   8   9  10  11    33  34  35  36  37  38  39
 12  13  14  15  16  17  18    40  41  42  43  44  45  46
 19  20  21  22  23  24  25    47  48  49  50  51  52  53
 26  27  28  29  30  31        54  55  56  57  58  59  60

# [...output truncated, entire year is shown...]</code></pre></li>
</ul>
<hr style="height:1pt; visibility:hidden;">
</section>
</section>
<section id="getting-help" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="getting-help"><span class="header-section-number">5.4</span> Getting help</h3>
<p>Many commands – <em>and other command-line programs!</em> – have a <strong><code>-h</code></strong> option for help, which usually gives a concise summary of the command’s syntax, i.e.&nbsp;it’s available options and arguments:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cal</span> <span class="at">-h</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>
Usage:
 cal [options] [[[day] month] year]

Options:
 -1, --one        show only current month (default)
 -3, --three      show previous, current and next month
 -s, --sunday     Sunday as first day of week
 -m, --monday     Monday as first day of week
 -j, --julian     output Julian dates
 -y, --year       show whole current year
 -V, --version    display version information and exit
 -h, --help       display this help text and exit</code></pre>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Another way to see documentation: the <code>man</code> command <em>(Click to expand)</em>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>An alternative way of getting help for Unix commands is with the <code>man</code> command:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">man</span> cal</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This manual page often includes a lot more details than the <code>--help</code> output, and it is opened inside a “pager” rather than printed to screen: type <strong><kbd>q</kbd></strong> to exit the pager that <code>man</code> launches.</p>
</div>
</div>
</div>
<section id="exercise-interpreting-the-help-output" class="level4 exercise">
<h4 class="anchored" data-anchor-id="exercise-interpreting-the-help-output"><i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Exercise: Interpreting the help output</h4>
</section>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="cd-and-command-actions" class="level3" data-number="5.5">
<h3 data-number="5.5" class="anchored" data-anchor-id="cd-and-command-actions"><span class="header-section-number">5.5</span> <code>cd</code> and command “actions”</h3>
<p>All the commands so far “merely” provided some information, which was printed to screen.</p>
<p>But many commands perform an <strong>action</strong> other than providing information. For example, you can use the command <strong><code>cd</code></strong> to Change Directory (i.e.&nbsp;change your <em>working</em> dir). And like many commands that perform an action, <code>cd</code> normally has <strong>no output</strong> at all.</p>
<p>Let’s use <code>cd</code> to move to another directory by specifying the <em>path</em> to that directory after the <code>cd</code> command:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /fs/ess/PAS2700</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/fs/ess/PAS2700</code></pre>
<ul>
<li><p>Like <code>cal</code>, <code>cd</code> accepts an argument. Unlike <code>cal</code>, this argument takes the form of a path that the command should operate on, which is the typical function of an argument.</p></li>
<li><p><code>cd</code> gives no output when it successfully changed the working directory. This is very common behavior for Unix commands that perform operations: <strong>when they succeed, they are silent</strong>.</p></li>
<li><p>Let’s also see what happens when <code>cd</code> does not succeed — it gives an error:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /fs/ess/Pas2700</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>-bash: cd: /fs/ess/Pas2700: No such file or directory</code></pre></li>
</ul>
<details>
<summary>
What was the problem with the path we specified? <em>(Click to see the answer)</em>
</summary>
<p>We used lowercase in <code>/pas2250/</code> — this should have been <code>/PAS2250/</code>. Everything, including paths, is <strong>case-sensitive</strong> in the Unix shell!</p>
</details>
<hr style="height:1pt; visibility:hidden;">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
General shell tips
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Everything in the shell is <strong>case-sensitive</strong>, including commands and file names.</li>
<li>Avoid spaces in file and dir names (we’ll talk more about this next week).</li>
<li>Your <strong>cursor</strong> can be anywhere on a line (not just at the end) when you press <kbd>Enter</kbd> to execute a command!</li>
<li>Any text that comes after a <strong><code>#</code></strong> is considered a <strong>comment</strong> instead of code!</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This entire line is a comment - you can run it and nothing will happen</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span>    <span class="co"># 'pwd' will be executed but everything after the '#' is ignored</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/users/PAS0471/jelmer</code></pre>
<hr style="height:1pt; visibility:hidden;">
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="keyboard-shortcuts" class="level3" data-number="5.6">
<h3 data-number="5.6" class="anchored" data-anchor-id="keyboard-shortcuts"><span class="header-section-number">5.6</span> Keyboard shortcuts</h3>
<p>Using keyboard shortcuts can make you work much more efficiently in the shell. And some are invaluable:</p>
<ul>
<li><strong>Cancel/stop/abort</strong> — If your prompt is “missing”, the shell is still busy executing your command, <em>or</em> you typed an incomplete command. To abort, press <kbd>Ctrl</kbd>+<kbd>C</kbd> and you will get your prompt back.</li>
<li><strong>Command history</strong> — <code>Up</code> / <code>Down</code> arrow keys to cycle through command history.</li>
<li><strong>Tab completion</strong> — The shell will auto-complete partial commands or file paths when you press <kbd>Tab</kbd>.</li>
</ul>
<p>The exercises below will introduce several more shortcuts that help you increase your productivity in the shell.</p>
<section id="keyboard-shortcuts-practice-1" class="level4 exercise">
<h4 class="anchored" data-anchor-id="keyboard-shortcuts-practice-1"><i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Keyboard shortcuts practice 1</h4>
<ul>
<li><p>Tab completion:</p>
<ul>
<li><p>Type <strong><code>/f</code></strong> and press <kbd>Tab</kbd> (will autocomplete to <em>/fs/</em>)</p></li>
<li><p>Then add <strong><code>e</code></strong> (<em>/fs/e</em>) and press <kbd>Tab</kbd> (will autocomplete to <em>/fs/ess/</em>).</p></li>
<li><p>Add <strong><code>PAS</code></strong> (<em>/fs/ess/PAS</em>) and press <kbd>Tab</kbd>. Nothing should happen: there are multiple (many!) options.</p></li>
<li><p>Press <kbd>Tab</kbd> <kbd>Tab</kbd> (i.e., twice in quick succession) and it should say:</p>
<pre class="bash-out"><code>Display all 503 possibilities? (y or n)</code></pre></li>
<li><p>Type <code>n</code> to answer no.</p></li>
<li><p>Add <strong><code>27</code></strong> (<em>/fs/ess/PAS27</em>) and press <kbd>Tab</kbd> (should autocomplete to <em>/fs/ess/PAS2700</em>).</p></li>
<li><p>Complete it to <em>/fs/ess/PAS2700</em> but don’t press <kbd>Enter</kbd>.</p></li>
</ul></li>
<li><p>Press <strong><kbd>Ctrl</kbd>+<kbd>A</kbd></strong> to move to the beginning of the line, and add <strong><code>ls</code></strong> to the beginning, then press <kbd>Enter</kbd> (anywhere on the line!) to execute the command (the <code>ls</code> command will list files):</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> /fs/ess/PAS2700</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>admin users</code></pre></li>
<li><p>Press <strong><kbd>⇧</kbd></strong> to get the previous command back on the prompt, and then press <strong><kbd>Ctrl+U</kbd></strong> to delete text until the beginning of the line.</p></li>
<li><p><kbd>Ctrl</kbd>+<kbd>U</kbd> actually <em>cuts</em> the text: “Yank” it back with <strong><kbd>Ctrl</kbd>+<kbd>Y</kbd></strong>. Press <kbd>Enter</kbd> again.</p></li>
<li><p>Type <code>cd</code> and then space, and then press <strong><kbd>Alt</kbd>+<kbd>.</kbd></strong> (or <strong><kbd>Esc</kbd>+<kbd>.</kbd></strong> on a Mac). That should insert <code>/fs/ess/PAS2700</code> on the line. In general terms, this keyboard shortcut will insert the last word (argument) from the last command line (and you can cycle back by pressing it multiple times!).</p></li>
</ul>
</section>
<section id="keyboard-shortcuts-practice-2" class="level4 exercise">
<h4 class="anchored" data-anchor-id="keyboard-shortcuts-practice-2"><i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Keyboard shortcuts practice 2</h4>
<p>To simulate a long-running command that we may want to abort, we can use the <code>sleep</code> command, which will make the computer wait for a specified amount of time until giving your prompt back. Run the below command and instead of waiting for the full 60 seconds, press <kbd>Ctrl</kbd> + <kbd>C</kbd> to get your prompt back sooner!</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sleep</span> 60s</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or, use <kbd>Ctrl</kbd> + <kbd>C</kbd> after running this example of an incomplete command (an opening parenthesis <code>(</code>):</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Keyboard shortcuts table <em>(Click to expand)</em>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<table class="table">
<colgroup>
<col style="width: 29%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th>Shortcut</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><kbd>Tab</kbd></td>
<td>Tab completion</td>
</tr>
<tr class="even">
<td><kbd>⇧</kbd> / <kbd>⇩</kbd></td>
<td>Cycle through previously issued commands</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd>(+<kbd>Shift</kbd>)+<kbd>C</kbd></td>
<td>Copy selected text</td>
</tr>
<tr class="even">
<td><kbd>Ctrl</kbd>(+<kbd>Shift</kbd>)+<kbd>V</kbd></td>
<td>Paste text from clipboard</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd>+<kbd>A</kbd> / <kbd>Ctrl</kbd>+<kbd>E</kbd></td>
<td>Go to beginning/end of line</td>
</tr>
<tr class="even">
<td><kbd>Ctrl</kbd>+<kbd>U</kbd> /<kbd>Ctrl</kbd>+<kbd>K</kbd></td>
<td>Cut from cursor to beginning / end of line</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd>+<kbd>W</kbd></td>
<td><del>Cut word before before cursor</del> (Only works on Macs in our shell in the browser!)</td>
</tr>
<tr class="even">
<td><kbd>Ctrl</kbd>+<kbd>Y</kbd></td>
<td>Paste (“yank”) text that was cut with one of the shortcuts above</td>
</tr>
<tr class="odd">
<td><kbd>Alt</kbd>+<kbd>.</kbd></td>
<td>Last argument of previous command (very useful!)</td>
</tr>
<tr class="even">
<td><kbd>Ctrl</kbd>+<kbd>R</kbd></td>
<td>Search history: press <kbd>Ctrl</kbd>+<kbd>R</kbd> again to cycle through matches, <kbd>Enter</kbd> to put command in prompt.</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd>+<kbd>C</kbd></td>
<td>Cancel (kill/stop/abort) currently active command</td>
</tr>
<tr class="even">
<td><kbd>Ctrl</kbd>+<kbd>D</kbd></td>
<td>Exit (a program or the shell, depending on the context) (same as <code>exit</code> command)</td>
</tr>
<tr class="odd">
<td><kbd>Ctrl</kbd>+<kbd>L</kbd></td>
<td>Clear the screen (same as <code>clear</code> command)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="environment-variables" class="level3" data-number="5.7">
<h3 data-number="5.7" class="anchored" data-anchor-id="environment-variables"><span class="header-section-number">5.7</span> Environment variables</h3>
<p>You may be familiar with the concept of variables from previous experience with perhaps R or another language. Variables can hold values and other pieces of data and are essential in programming.</p>
<ul>
<li>Assigning and printing the value of a variable <strong>in R</strong>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (Don't run this)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="styled-output"><code>[1] 5</code></pre>
</div>
</div>
<ul>
<li>Assigning and printing the value of a variable <strong>in the Unix shell</strong>:</li>
</ul>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="va">x</span><span class="op">=</span>5</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>5</code></pre>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
In the Unix shell code above, note that:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>There cannot be any <strong>spaces</strong> around the <strong><code>=</code></strong> in <code>x=5</code>.</li>
<li>You need a <strong><code>$</code> prefix</strong> to <em>reference</em> (but not to <em>assign</em>) variables in the shell<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</li>
<li>You need the <strong><code>echo</code></strong> command, a general command to print text, to print the value of <code>$x</code> (cf.&nbsp;in R). <code>echo</code> can also be used to print literal strings:</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Welcome to PLNTPTH 6193"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>Welcome to PLNTPTH 6193</code></pre>
<hr style="height:1pt; visibility:hidden;">
</div>
</div>
<p><strong>Environment variables</strong> are pre-existing variables that have been assigned values automatically. Two examples:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># $HOME contains the path to your Home dir:</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$HOME</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/users/PAS0471/jelmer</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># $USER contains your user name:</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$USER</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>jelmer</code></pre>
<section id="exercise-environment-variables" class="level4 exercise">
<h4 class="anchored" data-anchor-id="exercise-environment-variables"><i class="fa-solid fa-user-edit" aria-label="user-edit"></i> <strong>Exercise</strong>: environment variables</h4>
<p>Print “Hello there &lt;your username&gt;” (e.g.&nbsp;“Hello there natalie”) to the screen:</p>
<details>
<summary>
<em>Click to see the solution</em>
</summary>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (This would also work without the " " quotes)</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Hello there </span><span class="va">$USER</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>Hello there jelmer</code></pre>
</details>
</section>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="create-your-own-dir-get-the-csb-data" class="level3" data-number="5.8">
<h3 data-number="5.8" class="anchored" data-anchor-id="create-your-own-dir-get-the-csb-data"><span class="header-section-number">5.8</span> Create your own dir &amp; get the CSB data</h3>
<p>Our base OSC directory for the course is <strong><code>/fs/ess/PAS2700</code></strong>. Now, let’s all create our own subdir in here, and get the data from the CSB book.</p>
<ul>
<li><p>Create a directory for yourself using the <strong><code>mkdir</code></strong> (<strong>m</strong>a<strong>k</strong>e <strong>dir</strong>) command:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> /fs/ess/PAS2700/users/<span class="va">$USER</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Move there using <code>cd</code> (remember to use the <kbd>Alt/Esc</kbd>+<kbd>.</kbd> keyboard shortcut):</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /fs/ess/PAS2700/users/<span class="va">$USER</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Get the files associated with the CSB book by “<em>cloning</em>” (downloading) its Git repository:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/CSB-book/CSB.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Move into the <em>sandbox</em> dir for the Unix chapter (remember to use tab completion):</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> CSB/unix/sandbox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="paths-navigation-shortcuts" class="level3" data-number="5.9">
<h3 data-number="5.9" class="anchored" data-anchor-id="paths-navigation-shortcuts"><span class="header-section-number">5.9</span> Paths &amp; navigation shortcuts</h3>
<section id="absolute-full-paths-versus-relative-paths" class="level4">
<h4 class="anchored" data-anchor-id="absolute-full-paths-versus-relative-paths">Absolute (full) paths versus relative paths</h4>
<ul>
<li><p>Paths with a <strong>leading <code>/</code></strong> begin from the computer’s root directory, and are called “absolute” or “full paths”.<br>
<em>(They are equivalent to GPS coordinates for a geographical location,</em> <em>as they work regardless of where you are</em>).</p></li>
<li><p>Paths without a leading <strong><code>/</code></strong> begin from your current working directory, and are called “relative paths”.<br>
<em>(These work like directions along the lines of “take the second left:”</em> <em>they depend on your current location.)</em></p></li>
</ul>
<p>Above, we just used an absolute path (<code>cd /fs/ess/PAS2700/users/$USER</code>) and a relative path (<code>cd CSB/unix/sandbox</code>) to change directories.</p>
<p>Next week, we’ll talk more about the distinction between absolute and relative paths, and their respective merits.</p>
</section>
<section id="path-shortcuts" class="level4">
<h4 class="anchored" data-anchor-id="path-shortcuts">Path shortcuts</h4>
<ul>
<li><strong><code>~</code></strong> (a tilde) — represents your Home directory. For example, <code>cd ~</code> moves you to your Home dir.</li>
<li><strong><code>.</code></strong> (a single period) — represents the current working directory (we’ll soon see how why that can be useful).</li>
<li><strong><code>..</code></strong> (two periods) — Represents the directory “one level up” (towards the computer’s root dir).</li>
<li><code>-</code> (dash) [<em><code>cd</code> command only</em>] — Will move you back and forth to the last visited dir:</li>
</ul>
<p>Some examples:</p>
<ul>
<li><p>Use <code>..</code> to go up in the dir hierarchy in a relative path:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/fs/ess/PAS2700/users/jelmer/CSB/unix/sandbox</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ..</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/fs/ess/PAS2700/users/jelmer/CSB/unix</code></pre></li>
<li><p>This pattern can be continued all the way to the root of the computer, so <code>../..</code> means two levels up:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../..</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/fs/ess/PAS2700/users/jelmer</code></pre></li>
<li><p>Using <code>cd -</code> to move to the previous dir you were in:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="at">-</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/fs/ess/PAS2700/users/jelmer/CSB/unix</code></pre></li>
<li><p>Using <code>cd -</code> again will <em>not</em> move you one dir further back in time, but will instead toggle back to the dir you were before you used <code>cd -</code>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="at">-</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>/fs/ess/PAS2700/users/jelmer</code></pre></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Most of these path shortcuts work with all commands
</div>
</div>
<div class="callout-body-container callout-body">
<p>Except for <code>-</code>, these are <em>general shell shortcuts</em> that work with <strong>any</strong> command that accepts a path/file name.</p>
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="exercise" class="level4 exercise">
<h4 class="anchored" data-anchor-id="exercise"><i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Exercise</h4>
<ul>
<li><strong>A)</strong> Move back to the <code>/fs/ess/PAS2700/users/$USER/CSB/unix/sandbox</code> we were in earlier.</li>
</ul>
<details>
<summary>
<em>(Click for the solution)</em>
</summary>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> CSB/unix/sandbox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<ul>
<li><strong>B)</strong> Use a <em>relative path</em> with to move into the <code>/fs/ess/PAS2700/users/$USER/CSB/unix/data</code> dir.</li>
</ul>
<details>
<summary>
<em>(Click for the solution)</em>
</summary>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../data</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../sandbox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<ul>
<li><strong>C)</strong> The <code>ls</code> command lists files and dir, and accepts one or more paths as arguments. Use <code>ls</code> to list the files in your Home dir with a shortcut and without moving there.</li>
</ul>
<details>
<summary>
<em>(Click for the solution)</em>
</summary>
<ul>
<li>With the <code>~</code> shortcut:</li>
</ul>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> ~</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Output not shown)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>With the <code>$HOME</code> environment variable:</li>
</ul>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="va">$HOME</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Output not shown)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</section>
<p><br></p>
</section>
</section>
<section id="basic-unix-commands-ch.-1.5" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="basic-unix-commands-ch.-1.5"><span class="header-section-number">6</span> Basic Unix commands (Ch. 1.5)</h2>
<section id="ls-to-list-files" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="ls-to-list-files"><span class="header-section-number">6.1</span> <code>ls</code> to list files</h3>
<p>The <code>ls</code> command, short for “list”, will list files and directories:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (You should be in /fs/ess/PAS2700/users/$USER/CSB/unix/data)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>Buzzard2015_about.txt  Gesquiere2011_about.txt  Marra2014_about.txt   miRNA                   Pacifici2013_data.csv  Saavedra2013_about.txt
Buzzard2015_data.csv   Gesquiere2011_data.csv   Marra2014_data.fasta  Pacifici2013_about.txt  Saavedra2013</code></pre>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Side note: <code>ls</code> output colors <em>(click to expand)</em>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <code>ls</code> output above does not show the different colors you should see in your shell — the most common ones are:</p>
<ul>
<li>Entries in <span style="color: #0328fc">blue</span> are directories (like <code>miRNA</code> and <code>Saavedra2013</code> above)</li>
<li>Entries in black are regular files (like all other entries above)</li>
<li>Entries in <span style="color: #d92118">red</span> are compressed files (we’ll see examples of this later).</li>
</ul>
</div>
</div>
</div>
<p>By default, <code>ls</code> will list files and dirs in your current working dir in the way shown above. <em>For which dir</em> <code>ls</code> lists its contents can be changed with arguments, and <em>how</em> it shows the output can be changed with options. For example, we can call <code>ls</code> with the <strong>option <code>-l</code></strong> (lowercase L):</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>total 1793
-rw-rw----+ 1 jelmer PAS0471     562 Feb 24 20:30 Buzzard2015_about.txt
-rw-rw----+ 1 jelmer PAS0471   39058 Feb 24 20:30 Buzzard2015_data.csv
-rw-rw----+ 1 jelmer PAS0471     447 Feb 24 20:30 Gesquiere2011_about.txt
-rw-rw----+ 1 jelmer PAS0471   38025 Feb 24 20:30 Gesquiere2011_data.csv
-rw-rw----+ 1 jelmer PAS0471     756 Feb 24 20:30 Marra2014_about.txt
-rw-rw----+ 1 jelmer PAS0471  566026 Feb 24 20:30 Marra2014_data.fasta
drwxrwx---+ 2 jelmer PAS0471    4096 Feb 24 20:30 miRNA
-rw-rw----+ 1 jelmer PAS0471     520 Feb 24 20:30 Pacifici2013_about.txt
-rw-rw----+ 1 jelmer PAS0471 1076150 Feb 24 20:30 Pacifici2013_data.csv
drwxrwx---+ 2 jelmer PAS0471    4096 Feb 24 20:30 Saavedra2013
-rw-rw----+ 1 jelmer PAS0471     322 Feb 24 20:30 Saavedra2013_about.txt</code></pre>
<p>Notice that it lists the same items as above, but <strong>printed in a different format</strong>: one item per line, with additional information such as the date and time each file was last modified, and file sizes in bytes (to the left of the date).</p>
<p>Let’s add another option, <strong><code>-h</code></strong>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lh</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>total 1.8M
-rw-rw----+ 1 jelmer PAS0471  562 Feb 24 20:30 Buzzard2015_about.txt
-rw-rw----+ 1 jelmer PAS0471  39K Feb 24 20:30 Buzzard2015_data.csv
-rw-rw----+ 1 jelmer PAS0471  447 Feb 24 20:30 Gesquiere2011_about.txt
-rw-rw----+ 1 jelmer PAS0471  38K Feb 24 20:30 Gesquiere2011_data.csv
-rw-rw----+ 1 jelmer PAS0471  756 Feb 24 20:30 Marra2014_about.txt
-rw-rw----+ 1 jelmer PAS0471 553K Feb 24 20:30 Marra2014_data.fasta
drwxrwx---+ 2 jelmer PAS0471 4.0K Feb 24 20:30 miRNA
-rw-rw----+ 1 jelmer PAS0471  520 Feb 24 20:30 Pacifici2013_about.txt
-rw-rw----+ 1 jelmer PAS0471 1.1M Feb 24 20:30 Pacifici2013_data.csv
drwxrwx---+ 2 jelmer PAS0471 4.0K Feb 24 20:30 Saavedra2013
-rw-rw----+ 1 jelmer PAS0471  322 Feb 24 20:30 Saavedra2013_about.txt</code></pre>
<details>
<summary>
What is different about the output, and what do you think that means? <em>(Click to see the answer)</em>
</summary>
<p>The only difference is in the format of the column reporting the sizes of the items listed.</p>
<p>We now have “Human-readable filesizes” (hence <code>-h</code>), where sizes on the scale of kilobytes will be shown with <code>K</code>s, of megabytes with <code>M</code>s, and of gigabytes with <code>G</code>s. That can be really useful especially for very large files.</p>
</details>
<p>We can also list files in directories other than the one we are in, by specifying that dir as an argument:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> miRNA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>ggo_miR.fasta  hsa_miR.fasta  miR_about.txt  miRNA_about.txt  ppa_miR.fasta  ppy_miR.fasta  ptr_miR.fasta  ssy_miR.fasta</code></pre>
<p>And like we saw with <code>cal</code>, we can combine options and arguments:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lh</span> miRNA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>total 320K
-rw-rw----+ 1 jelmer PAS0471  18K Feb 24 20:30 ggo_miR.fasta
-rw-rw----+ 1 jelmer PAS0471 131K Feb 24 20:30 hsa_miR.fasta
-rw-rw----+ 1 jelmer PAS0471  104 Feb 24 20:30 miR_about.txt
-rw-rw----+ 1 jelmer PAS0471  104 Feb 24 20:30 miRNA_about.txt
-rw-rw----+ 1 jelmer PAS0471 4.0K Feb 24 20:30 ppa_miR.fasta
-rw-rw----+ 1 jelmer PAS0471  33K Feb 24 20:30 ppy_miR.fasta
-rw-rw----+ 1 jelmer PAS0471  29K Feb 24 20:30 ptr_miR.fasta
-rw-rw----+ 1 jelmer PAS0471  495 Feb 24 20:30 ssy_miR.fasta</code></pre>
<p>Let’s move into the <code>sandbox</code> dir in preparation for the next sections:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../sandbox</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>Papers and reviews</code></pre>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="cp-to-copy-files" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="cp-to-copy-files"><span class="header-section-number">6.2</span> <code>cp</code> to copy files</h3>
<p>The <code>cp</code> command copies files and/or directories from one location to another. It has two required arguments: what you want to copy (the <em>source</em>), and where you want to copy it to (the <em>destination</em>). So, we can summarize its basic syntax as <code>cp &lt;source&gt; &lt;destination&gt;</code>.</p>
<p>For example, to copy a file to our current working directory using the <code>.</code> shortcut, keeping the original file name:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> ../data/Buzzard2015_about.txt .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can also copy using a new name for the copy:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> ../data/Buzzard2015_about.txt buzz2.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>cp</code> will by default refuse to copy directories and their contents — that is, it is not “recursive by default”. The <code>-r</code> option is needed for recursive copying:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> <span class="at">-r</span> ../data/ . </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Check what you now have in your <code>sandbox</code> dir:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>buzz2.txt  Buzzard2015_about.txt  data  Papers and reviews</code></pre>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The <code>cp</code> command will by default:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Not report what it does: no output means it worked (use the <code>-v</code> option for verbose to make it report what it does).</li>
<li>Overwrite existing files without reporting this (use the <code>-i</code> option to make it ask before overwriting).</li>
</ul>
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="mv-to-move-and-rename-files" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="mv-to-move-and-rename-files"><span class="header-section-number">6.3</span> <code>mv</code> to move and rename files</h3>
<p>Use <strong><code>mv</code></strong> both to move and rename files (this is fundamentally the same operation):</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Same directory, different file name ("renaming")</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> buzz2.txt buzz_copy.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb84"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Different directory, same file name ("moving")</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> buzz_copy.txt data/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Unlike <code>cp</code>, <code>mv</code> is recursive by default, so you won’t need the <code>-r</code> option.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>mv</code> and <code>cp</code> tips
</div>
</div>
<div class="callout-body-container callout-body">
<p>For both <code>cp</code> and <code>mv</code>, when operating on files (and this works equivalently for dirs):</p>
<ul>
<li>If the destination is an existing dir, the file will go into that dir and keep its original name.</li>
<li>If the destination is <em>not</em> an existing dir, the (last bit of the) destination specifies the new file name.</li>
<li>If you use a trailing slash in the destination, you are making explicit that you are referring to a dir and not a file.</li>
</ul>
<p>See also the exercise below.</p>
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
<section id="rm-to-remove-files-and-optionally-dirs" class="level4">
<h4 class="anchored" data-anchor-id="rm-to-remove-files-and-optionally-dirs"><code>rm</code> to remove files and optionally dirs</h4>
<p>The <strong><code>rm</code></strong> command removes files and optionally dirs:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> buzz_copy.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Like with <code>cp</code>, the <strong><code>-r</code></strong> option is needed to make the command work recursively:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First we create 3 levels of dirs - we need `-p` to make mkdir work recursively:</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> d1/d2/d3</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Then we try to remove the d1 dir:</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> d1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>rm: cannot remove ‘d1’: Is a directory</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This does work (silently!)</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-r</span> d1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
There is no thrash bin when deleting files in the shell, so use <code>rm</code> with caution! <em>(Click to expand)</em>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>rm -r</code> can be very dangerous — for example <code>rm -r /</code> would at least attempt to remove the entire contents of the computer, including the operating system.</p>
<p>A couple ways to take precautions:</p>
<ul>
<li>You can add the <code>-i</code> option, which will have you confirm each individual removal (can be tedious)</li>
<li>When you <em>intend</em> to remove an empty dir, you can use the <code>rmdir</code> command which will do just (and only) that — that way, if the dir isn’t empty after all, you’ll get an error.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="exercise-1" class="level4 exercise">
<h4 class="anchored" data-anchor-id="exercise-1"><i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Exercise</h4>
<p>What would the following command attempt to do? Do you think that would work?</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> Buzzard2015_about.txt more_data/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<details>
<summary>
Click to see the solution
</summary>
<div class="sourceCode" id="cb90"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> Buzzard2015_about.txt more_data/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>cp: cannot create regular file ‘more_data/’: Not a directory</code></pre>
</details>
</section>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="viewing-and-processing-text-files" class="level3" data-number="6.4">
<h3 data-number="6.4" class="anchored" data-anchor-id="viewing-and-processing-text-files"><span class="header-section-number">6.4</span> Viewing and processing text files</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../data   <span class="co"># Move to the data dir for the next commands</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong><code>cat</code></strong> will print the contents of one or more files to screen:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> Marra2014_about.txt Gesquiere2011_about.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong><code>wc</code></strong> will count lines, words, and characters by default — is used mostly to just count lines with the <code>-l</code> option:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> Marra2014_about.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong><code>head</code></strong> and <strong><code>tail</code></strong> will print the first or last lines of a file:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> Gesquiere2011_data.csv         <span class="co"># Default: first 10 lines</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb96"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-n</span> 2 Gesquiere2011_data.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A neat trick to <em>start at</em> a specific line, here to skip the header:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-n</span> +2 Gesquiere2011_data.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section>
</section>
<section id="advanced-unix-commands-ch.-1.6" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="advanced-unix-commands-ch.-1.6"><span class="header-section-number">7</span> Advanced Unix commands (Ch. 1.6)</h2>
<section id="standard-output-and-redirection" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="standard-output-and-redirection"><span class="header-section-number">7.1</span> Standard output and redirection</h3>
<p>The regular output of a command is called <strong>“standard out”</strong> (“<em>stdout</em>”). By default, this is printed to screen, as we’ve seen many times now, but it can be “<em>redirected</em>” to a file.</p>
<p>With “<strong><code>&gt;</code></strong>”, we <strong>redirect</strong> output to a file:</p>
<ul>
<li>If the file doesn’t exist, it will be <em>created</em>.</li>
<li>If the file does exist, any contents will be <em>overwritten</em>.</li>
</ul>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../sandbox</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"My first line"</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"My first line"</span> <span class="op">&gt;</span> test.txt</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> test.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>With “<strong><code>&gt;&gt;</code></strong>”, we <strong>append</strong> the output to a file:</li>
</ul>
<div class="sourceCode" id="cb99"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"My second line"</span> <span class="op">&gt;&gt;</span> test.txt</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> test.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="standard-input-and-pipes" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="standard-input-and-pipes"><span class="header-section-number">7.2</span> Standard input and pipes</h3>
<p>Recall from some of the previous examples that a file name can be given as an argument to many commands — for example, see the following sequence of commands:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> ../data/Saavedra2013 <span class="op">&gt;</span> filelist.txt</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> filelist.txt</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> filelist.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>However, most commands <em>also</em> accept input from so-called “standard input” (<em>stdin</em>) using the <strong>pipe</strong>, “<strong><code>|</code></strong>”:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> ../data/Saavedra2013 <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When we use the pipe, the output of the command on the left-hand side (a file listing, in this case) is no longer printed to screen but is redirected into the <code>wc</code> command,</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why pipes are useful
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pipes avoid the need write/read intermediate files — this saves typing, makes the operation quicker, and reduces file clobber.</p>
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="selecting-columns-using-cut" class="level3" data-number="7.3">
<h3 data-number="7.3" class="anchored" data-anchor-id="selecting-columns-using-cut"><span class="header-section-number">7.3</span> Selecting columns using <code>cut</code></h3>
<p>We’ll now turn to a number of Unix commands that may be described as “data tools”: <code>cut</code>, <code>sort</code>, <code>uniq</code>, <code>tr</code>, and <code>grep</code>.</p>
<p>Most of the examples will use the file <code>Pacifici2013_data.csv</code>, so let’s have a look at the contents of that file first:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ../data</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> 2 Pacifici2013_data.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Introduce tabular files</p>
<p>The <code>cut</code> command will select columns from To select a column with specify the specify the column <em>delimiter</em> with <strong><code>-d</code></strong>, and the numbers of the desired column (or <em>field</em>) with <strong><code>-f</code></strong>:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> <span class="st">";"</span> <span class="at">-f</span> 1 Pacifici2013_data.csv <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To select multiple columns, use a range or comma-delimited list:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> <span class="st">";"</span> <span class="at">-f</span> 1-4 Pacifici2013_data.csv <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 3</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> <span class="st">";"</span> <span class="at">-f</span> 2,8 Pacifici2013_data.csv <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Unfortunately, we can’t <em>reorder</em> columns using <code>cut</code>.
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="combining-cut-sort-and-uniq-to-create-a-list" class="level3" data-number="7.4">
<h3 data-number="7.4" class="anchored" data-anchor-id="combining-cut-sort-and-uniq-to-create-a-list"><span class="header-section-number">7.4</span> Combining <code>cut</code>, <code>sort</code>, and <code>uniq</code> to create a list</h3>
<p>Let’s say we want an alphabetically sorted list of animal <em>orders</em> from the <code>Pacifici2013_data.csv</code> file:</p>
<ul>
<li><p>First, we select our column of interest, and get rid of the header line:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> <span class="st">";"</span> <span class="at">-f</span> 2 Pacifici2013_data.csv <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> +2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Next, we pipe to <code>sort</code> to sort the result, and then to <code>uniq</code> to only keep unique rows (values):</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> <span class="st">";"</span> <span class="at">-f</span> 2 Pacifici2013_data.csv <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> +2 <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>uniq</code> only removes all duplicates for <em>sorted</em> data.
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="substituting-characters-using-tr" class="level3" data-number="7.5">
<h3 data-number="7.5" class="anchored" data-anchor-id="substituting-characters-using-tr"><span class="header-section-number">7.5</span> Substituting characters using <code>tr</code></h3>
<p><code>tr</code> for <strong><code>tr</code></strong>anslate will substitute characters – here, any <code>a</code> for a <code>b</code>:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"aaaabbb"</span> <span class="kw">|</span> <span class="fu">tr</span> a b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>tr</code> also works well with multiple values and replacements:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"123456789"</span> <span class="kw">|</span> <span class="fu">tr</span> 1-5 0    <span class="co"># Replace any of 1-5 with 0</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co"># One-to-one mapping of input and replacement!</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"ACtGGcAaTT"</span> <span class="kw">|</span> <span class="fu">tr</span> actg ACTG</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ACTGGCAATT</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"aabbccddee"</span> <span class="kw">|</span> <span class="fu">tr</span> a-c 1-3</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 112233ddee</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Deletion and “squeezing”:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"aabbccddee"</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="at">-d</span> a  <span class="co"># Delete all a's</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bbccddee</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"aabbccddee"</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="at">-s</span> a  <span class="co"># Remove consecutive duplicates</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co"># abbccddee</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Oddly enough <code>tr</code> does not take a file name as an argument, so how can we provide it with input from a file?</p>
<ul>
<li><p>Using a pipe:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> inputfile.csv <span class="kw">|</span> <span class="fu">tr</span> <span class="st">" "</span> <span class="st">"\t"</span> <span class="op">&gt;</span> outputfile.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>By <em>redirecting</em> the input (<strong><code>&lt;</code></strong>):</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tr</span> <span class="st">" "</span> <span class="st">"\t"</span> <span class="op">&lt;</span> inputfile.csv <span class="op">&gt;</span> outputfile.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In, <strong><code>\t</code></strong>, the <strong><code>\</code></strong> gives the <strong><code>t</code></strong> a special meaning: <strong><code>Tab</code></strong>. This is a kind of “regular expression”, and we’ll learn more about these in Week 4.</p>
</div>
</div>
</section>
<section id="grep-to-print-lines-matching-a-pattern" class="level3" data-number="7.6">
<h3 data-number="7.6" class="anchored" data-anchor-id="grep-to-print-lines-matching-a-pattern"><span class="header-section-number">7.6</span> <code>grep</code> to print lines matching a pattern</h3>
<p>Print all lines containing “Vombatidae”:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="st">"Vombatidae"</span> Pacifici2013_data.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Print all lines <em>not</em> containing “Vombatidae”:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-v</span> <span class="st">"Vombatidae"</span> Pacifici2013_data.csv  <span class="co"># v for inVert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>grep</code> tips
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>It is best to always use quotes around the pattern</li>
<li>Incomplete matches work: “<code>Vombat</code>” matches <code>Vombatidae</code></li>
</ul>
</div>
</div>
<ul>
<li><p><code>grep</code> has many other useful options — more in Week 4:</p>
<ul>
<li><code>-c</code> to count matches</li>
<li><code>-i</code> to ignore case</li>
<li><code>-r</code> to search file recursively – <strong>very useful</strong></li>
<li><code>-B</code> and <code>-A</code> to print lines surrounding matches</li>
<li><code>-w</code> to match “words”</li>
</ul></li>
</ul>
<p><br></p>
</section>
</section>
<section id="wrap-up-the-unix-philosophy" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="wrap-up-the-unix-philosophy"><span class="header-section-number">8</span> Wrap-up &amp; the Unix philosophy</h2>
<section id="covered-in-the-chapter-but-not-in-todays-lecture" class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="covered-in-the-chapter-but-not-in-todays-lecture"><span class="header-section-number">8.1</span> Covered in the chapter but not in today’s lecture</h3>
<ul>
<li>The <code>less</code> pager to view files</li>
<li>The <code>find</code> command to find files</li>
<li>Showing and changing file permissions</li>
<li>Basic shell scripting</li>
<li><code>for</code> loops</li>
<li><code>$PATH</code> and bash profile settings</li>
</ul>
<p><strong>We’ll cover all of these in class over the next few weeks.</strong></p>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="the-unix-philosophy" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="the-unix-philosophy"><span class="header-section-number">8.2</span> The Unix philosophy</h3>
<blockquote class="blockquote">
<p><em>This is the Unix philosophy: Write programs that do one thing and do it well.</em> <em>Write programs to work together. Write programs to handle text <strong>streams</strong>,</em> <em>because that is a universal interface.</em><br> — Doug McIlory</p>
</blockquote>
<p>Advantages of a modular approach:</p>
<ul>
<li>Easier to spot errors</li>
<li>Easy to swap out components, including in other languages</li>
<li>Easier to learn (?)</li>
</ul>
<section id="text-streams" class="level4">
<h4 class="anchored" data-anchor-id="text-streams">Text “streams”?</h4>
<p>Rather than loading entire files into memory, process them one line at a time. Very useful with large files!</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="pp">*</span>.fa <span class="op">&gt;</span> combined.fa</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="unix-shell-in-the-weeks-ahead" class="level3" data-number="8.3">
<h3 data-number="8.3" class="anchored" data-anchor-id="unix-shell-in-the-weeks-ahead"><span class="header-section-number">8.3</span> Unix shell in the weeks ahead</h3>
<ul>
<li><p>In all weeks of the course, we will be working in the Unix shell, though sometimes our focus will be on a specific tool, such as Git in week 3.</p></li>
<li><p>In week 4, we’ll fully focus on the shell and shell scripting.</p></li>
</ul>


</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Command-line Interface (CLI), as opposed to Graphical User Interface (GUI)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Anytime you see a word/string that starts with a <code>$</code> in the shell, you can safely assume that it is a variable.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>